window.__require=function e(t,n,o){function r(i,a){if(!n[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){return r(t[i][1][e]||e)},u,u.exports,e,t,n,o)}return n[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<o.length;i++)r(o[i]);return r}({CGame:[function(e,t,n){"use strict";cc._RF.push(t,"9e3470BUCpKiq+0oLRSidXG","CGame");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var r,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(c<3?r(i):c>3?r(t,n,i):r(t,n))||i);return c>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./CPiece"),a=e("./CPieceMgr"),s=e("../../XZH5Game/GameManager"),l=e("../../XZH5Game/PublicDefine"),u=cc._decorator,p=u.ccclass,f=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabPiece=null,t.nodeBg=null,t.nodeBgTip=null,t.nodePieceMgr=null,t.nodeFg=null,t.nodeStartCountDown=null,t.groupCountDown=null,t.labelCountDown=null,t.mgrScale=.37,t.sfpPieceMask2=[],t.sfpPieceMask3=[],t.sfpPieceMask4=[],t.sfpPieceBG=null,t._bgWidth=0,t._bgHeight=0,t._pieceCol=2,t._pieceRow=2,t._pieceScale=1,t._piecePos=[],t._pieceNodes=[],t._timeLeft=0,t._gameState=l.GAME_STATE.GAME_INIT,t}return r(t,e),t.prototype.start=function(){null==s.default.Instance.spriteFramePuzzle&&(s.default.Instance.spriteFramePuzzle=this.sfpPieceBG),this._pieceCol=s.default.Instance.nLevel,this._pieceRow=s.default.Instance.nLevel,this._pieceScale=2/s.default.Instance.nLevel,this._bgWidth=this.nodeBg.width,this._bgHeight=this.nodeBg.height,this.nodeBgTip.getComponent(cc.Sprite).spriteFrame=s.default.Instance.spriteFramePuzzle,this.calcPiecePos(),this.reloadAllPiece()},t.prototype.update=function(e){this._gameState==l.GAME_STATE.GAME_START&&(this._timeLeft-=e,this._timeLeft<=0&&(this._timeLeft=0,this.showGameEnd(l.GAME_END_TYPE.GAME_LOSE)),this.labelCountDown.string=Math.ceil(this._timeLeft).toString())},t.prototype.reloadAllPiece=function(){var e=this;this.nodeBg.removeAllChildren(),this.nodePieceMgr.removeAllChildren(),this.nodeFg.removeAllChildren(),this._gameState=l.GAME_STATE.GAME_INIT,this._timeLeft=s.default.Instance.nTime,this.nodePieceMgr.getComponent(a.default).reset(),this.labelCountDown.string=this._timeLeft.toString(),this.groupCountDown.active=!1;var t=this.sfpPieceMask2;3==s.default.Instance.nLevel?t=this.sfpPieceMask3:4==s.default.Instance.nLevel&&(t=this.sfpPieceMask4),this._pieceNodes=[];for(var n=0;n<this._pieceRow;n++)for(var o=0;o<this._pieceCol;o++){var r=cc.instantiate(this.prefabPiece),c=r.getComponent(i.default);c.reloadBg(this.nodeFg,this._bgWidth,this._bgHeight,this._pieceCol,this._pieceRow,o,n),c.setTouchEndCallback(function(t,n){e.onPieceTouchEndCallback(t,n)}),c.setTouchStartCallback(function(t){e.onPieceTouchStartCallback(t)});var u=o+n*this._pieceCol;c.setBgMaskSpriteFrame(t[u]),c.setBgSpriteFrame(s.default.Instance.spriteFramePuzzle),this._pieceNodes.push(r),r.parent=this.nodeBg,r.scale=this._pieceScale,r.x=this._piecePos[n][o].x,r.y=this._piecePos[n][o].y}for(this._pieceNodes.sort(function(){return Math.random()-.5}),n=0;n<this._pieceNodes.length;n++){var p=this._pieceNodes[n].getComponent(i.default);cc.log("Piece"+n+":"+p.getPosString())}this.showGameStart()},t.prototype.onPieceTouchStartCallback=function(e){for(var t=this.nodePieceMgr.getComponent(a.default),n=-1,o=0;o<t.getPieceCount();o++)if(e==t.getPiece(o)){n=o;break}t.removePiece(n),t.moveToLeft(n)},t.prototype.onPieceTouchEndCallback=function(e,t){for(var n=cc.winSize.width,o=0,r=0,c=0;c<this._pieceRow;c++)for(var s=0;s<this._pieceCol;s++)(h=this.nodeBg.convertToWorldSpaceAR(this._piecePos[c][s]).sub(t).mag())<n&&(n=h,o=this._piecePos[c][s].x,r=this._piecePos[c][s].y,e.getComponent(i.default).setCurrentRowCol(c,s));e.parent!=this.nodeBg&&(this.changePieceParent(e,this.nodeBg),e.scale=this._pieceScale);var u=new cc.Vec2;u.y=0;var p=this.nodePieceMgr.getComponent(a.default),f=!1,d=-1;for(c=0;c<=p.getPieceCount();c++){var h;u.x=p.getOffset()/2+c*p.getOffset(),(h=this.nodePieceMgr.convertToWorldSpaceAR(u).sub(t).mag())<n&&(f=!0,n=h,o=u.x,r=u.y,d=c)}f?(this.changePieceParent(e,this.nodePieceMgr),e.scale=this.mgrScale,p.moveToRight(d),p.addPiece(d,e),e.getComponent(i.default).setCurrentRowCol(-1,-1)):e.getComponent(i.default).isInRightPos()&&(cc.log("piece is right"),this.checkAllPieces()&&this.showGameEnd(l.GAME_END_TYPE.GAME_WIN)),cc.tween(e).to(.1,{position:cc.v3(o,r,0)}).start()},t.prototype.changePieceParent=function(e,t){if(e.parent!=t){var n=new cc.Vec2(e.x,e.y),o=e.parent.convertToWorldSpaceAR(n);n=t.convertToNodeSpaceAR(o),e.x=n.x,e.y=n.y,e.parent=t,t==this.nodeBg?e.getComponent(i.default).setMoveFrom(1):t==this.nodePieceMgr&&e.getComponent(i.default).setMoveFrom(0)}},t.prototype.calcPiecePos=function(){var e=this._bgWidth/this._pieceCol,t=this._bgHeight/this._pieceRow,n=t>>1,o=t>>1;this._piecePos=[];for(var r=0;r<this._pieceRow;r++){this._piecePos[r]=[];for(var c=0;c<this._pieceCol;c++){var i=new cc.Vec2;i.x=n+e*c,i.y=-o-t*r,this._piecePos[r].push(i)}}},t.prototype.checkAllPieces=function(){for(var e=0;e<this._pieceNodes.length;e++){var t=this._pieceNodes[e].getComponent(i.default);if(null!=t&&!t.isInRightPos())return!1}return!0},t.prototype.showGameStart=function(){var e=this;cc.log("game start"),this.nodeStartCountDown.getComponent(cc.Animation).play(),cc.tween(this.node).to(3,{}).call(function(){e.onGameStarted()}).start()},t.prototype.onGameStarted=function(){var e=this;cc.log("on game started");for(var t=this.nodePieceMgr.getComponent(a.default),n=0,o=0,r=function(r){var a=c._pieceNodes[r];if(null!=a){var s=a.getComponent(i.default);if(null!=s){t.addPiece(n,a);var l=a.width*c.mgrScale,u=(l>>1)+n*l;n++,o<=0&&(o=l);var p=new cc.Vec2(u,0),f=c.nodePieceMgr.convertToWorldSpaceAR(p);p=c.nodeFg.convertToNodeSpaceAR(f),c.changePieceParent(a,c.nodeFg),cc.tween(a).to(.5,{position:cc.v3(p.x,p.y,0),scale:c.mgrScale}).call(function(){e.changePieceParent(a,e.nodePieceMgr),s.setMoveFrom(0),s.enableTouchEvent()}).start()}}},c=this,s=0;s<this._pieceNodes.length;s++)r(s);t.setOffset(o),this.groupCountDown.active=!0,this._gameState=l.GAME_STATE.GAME_START},t.prototype.showGameEnd=function(e){var t=this;cc.log("game end:"+e),this._gameState=l.GAME_STATE.GAME_END,s.default.Instance.eGameEndType=e;for(var n=0;n<this._pieceNodes.length;n++){var o=this._pieceNodes[n];if(null!=o){var r=o.getComponent(i.default);null!=r&&r.disableTouchEvent()}}cc.tween(this.node).to(3,{}).call(function(){t.onGameEnded()}).start()},t.prototype.onGameEnded=function(){cc.log("on game ended:"+s.default.Instance.eGameEndType),this.reloadAllPiece()},c([f(cc.Prefab)],t.prototype,"prefabPiece",void 0),c([f(cc.Node)],t.prototype,"nodeBg",void 0),c([f(cc.Node)],t.prototype,"nodeBgTip",void 0),c([f(cc.Node)],t.prototype,"nodePieceMgr",void 0),c([f(cc.Node)],t.prototype,"nodeFg",void 0),c([f(cc.Node)],t.prototype,"nodeStartCountDown",void 0),c([f(cc.Node)],t.prototype,"groupCountDown",void 0),c([f(cc.Label)],t.prototype,"labelCountDown",void 0),c([f],t.prototype,"mgrScale",void 0),c([f([cc.SpriteFrame])],t.prototype,"sfpPieceMask2",void 0),c([f([cc.SpriteFrame])],t.prototype,"sfpPieceMask3",void 0),c([f([cc.SpriteFrame])],t.prototype,"sfpPieceMask4",void 0),c([f(cc.SpriteFrame)],t.prototype,"sfpPieceBG",void 0),c([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../XZH5Game/GameManager":"GameManager","../../XZH5Game/PublicDefine":"PublicDefine","./CPiece":"CPiece","./CPieceMgr":"CPieceMgr"}],CInit:[function(e,t,n){"use strict";cc._RF.push(t,"cdb99RNRx5EvpUBje4681ow","CInit");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var r,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(c<3?r(i):c>3?r(t,n,i):r(t,n))||i);return c>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../XZH5Game/GameManager"),a=e("../../XZH5Game/PublicDefine"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeBg=null,t.progressBar=null,t.testLabel=null,t.sfpDefaultPuzzle=null,t._retry=0,t}return r(t,e),t.prototype.start=function(){if(null!=localStorage.getItem("paramJson")){var e=JSON.parse(localStorage.getItem("paramJson")),t=JSON.stringify(e);cc.log("has param:"+t),null!=this.testLabel&&(this.testLabel.string=t),null!=e.level&&(i.default.Instance.nLevel=Number.parseInt(e.level),(null==i.default.Instance.nLevel||i.default.Instance.nLevel<2||i.default.Instance.nLevel>4)&&(i.default.Instance.nLevel=4)),null!=e.time&&(i.default.Instance.nTime=Number.parseInt(e.time),(null==i.default.Instance.nTime||i.default.Instance.nTime<=0)&&(i.default.Instance.nTime=10)),null!=e.score&&(i.default.Instance.nScoreInit=Number.parseInt(e.score),(null==i.default.Instance.nScoreInit||i.default.Instance.nScoreInit<0)&&(i.default.Instance.nScoreInit=0)),i.default.Instance.nScoreCurr=i.default.Instance.nScoreInit,null!=e.cost&&(i.default.Instance.nScoreCost=Number.parseInt(e.cost),(null==i.default.Instance.nScoreCost||i.default.Instance.nScoreCost<0)&&(i.default.Instance.nScoreCost=100)),i.default.Instance.strBGPath=e.bg_path,i.default.Instance.strPuzzlePath=e.puzzle_path,i.default.Instance.strAppId=e.app_id,i.default.Instance.strUid=e.uid,i.default.Instance.strReturnUrl=e.return_url,i.default.Instance.strCheckCode=e.check_code,i.default.Instance.strTimeStamp=e.time_stamp}else i.default.Instance.nLevel=2,i.default.Instance.nTime=10,i.default.Instance.nScoreInit=100,i.default.Instance.nScoreCurr=100,i.default.Instance.nScoreCost=100,i.default.Instance.strBGPath="https://songgravel.github.io/test/bg_001.jpg",i.default.Instance.strPuzzlePath="https://songgravel.github.io/test/product_001.png",i.default.Instance.strAppId="123",i.default.Instance.strUid="12345",i.default.Instance.strReturnUrl="/pages/content/content",i.default.Instance.strCheckCode="123456",i.default.Instance.strTimeStamp="12345678";this.loadRemoteBG(),cc.director.preloadScene("game",function(){cc.log("game scene preloaded")})},t.prototype.loadRemoteBG=function(){if(cc.log("loadRemoteBG"),null==i.default.Instance.strBGPath||""==i.default.Instance.strBGPath)return this.progressBar.progress=.5,void this.loadRemotePuzzle();var e=this;cc.assetManager.loadRemote(i.default.Instance.strBGPath,{onFileProgress:function(t,n){n>0&&(e.progressBar.progress=t/n*.5)}},function(t,n){if(t)return a.default.Log("[CInit][loadRemoteBG]LoadSprite:"+t.message),this.progressBar.progress=.5,void e.loadRemotePuzzle();var o=new cc.SpriteFrame(n);e.nodeBg.getComponent(cc.Sprite).spriteFrame=o,e.loadRemotePuzzle()})},t.prototype.loadRemotePuzzle=function(){if(cc.log("loadRemotePuzzle"),this._retry++,this._retry>3||null==i.default.Instance.strPuzzlePath||""==i.default.Instance.strPuzzlePath)return i.default.Instance.spriteFramePuzzle=this.sfpDefaultPuzzle,this.progressBar.progress=1,cc.log("load default puzzle"),void this.switchScene();var e=this;cc.assetManager.loadRemote(i.default.Instance.strPuzzlePath,{onFileProgress:function(t,n){n>0&&(e.progressBar.progress=.5+t/n*.5)}},function(t,n){if(t)return a.default.Log("[CInit][loadRemotePuzzle]LoadSprite:"+t.message),void e.loadRemotePuzzle();e.progressBar.progress=1;var o=new cc.SpriteFrame(n);i.default.Instance.spriteFramePuzzle=o,e.switchScene()})},t.prototype.switchScene=function(){cc.log("switch scene"),cc.director.loadScene("game")},c([u(cc.Node)],t.prototype,"nodeBg",void 0),c([u(cc.ProgressBar)],t.prototype,"progressBar",void 0),c([u(cc.Label)],t.prototype,"testLabel",void 0),c([u(cc.SpriteFrame)],t.prototype,"sfpDefaultPuzzle",void 0),c([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../XZH5Game/GameManager":"GameManager","../../XZH5Game/PublicDefine":"PublicDefine"}],CPieceMgr:[function(e,t,n){"use strict";cc._RF.push(t,"81576S1vcJEbrz6xI2pyNqY","CPieceMgr");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var r,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(c<3?r(i):c>3?r(t,n,i):r(t,n))||i);return c>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pieces=[],t._offset=0,t}return r(t,e),t.prototype.start=function(){},t.prototype.reset=function(){this._offset=0,this._pieces=[]},t.prototype.getPieceCount=function(){return this._pieces.length},t.prototype.getPiece=function(e){return e<0||e>=this._pieces.length?null:this._pieces[e]},t.prototype.addPiece=function(e,t){e<0||e>this._pieces.length||null!=t&&this._pieces.splice(e,0,t)},t.prototype.removePiece=function(e){e<0||e>=this._pieces.length||this._pieces.splice(e,1)},t.prototype.moveToLeft=function(e){if(!(e<0||e>=this._pieces.length))for(var t=0;t<this._pieces.length;t++)t>=e&&cc.tween(this._pieces[t]).by(.5,{position:cc.v2(-this._offset,0)}).start()},t.prototype.moveToRight=function(e){if(!(e<0||e>=this._pieces.length))for(var t=0;t<this._pieces.length;t++)t>=e&&cc.tween(this._pieces[t]).by(.1,{position:cc.v2(this._offset,0)}).start()},t.prototype.setOffset=function(e){this._offset=e},t.prototype.getOffset=function(){return this._offset},c([a],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],CPiece:[function(e,t,n){"use strict";cc._RF.push(t,"4f1f5MECm1NQJq2q7dmIPgj","CPiece");var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var r,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(c<3?r(i):c>3?r(t,n,i):r(t,n))||i);return c>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeBg=null,t._nodeFg=null,t._totalCol=0,t._totalRow=0,t._colIndex=0,t._rowIndex=0,t._colCurr=-1,t._rowCurr=-1,t._bgWidth=0,t._bgHeight=0,t._touchEndCallback=null,t._touchMoveCallback=null,t._touchStartCallback=null,t._moveFrom=0,t._scale=1,t}return r(t,e),t.prototype.start=function(){},t.prototype.enableTouchEvent=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){null!=e._touchStartCallback&&0==e._moveFrom&&e._touchStartCallback(e.node)}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.node.parent=e._nodeFg;var n=e._nodeFg.convertToNodeSpaceAR(t.getLocation());e.node.x=n.x,e.node.y=n.y,e.node.scale<e._scale&&(e.node.scale=e._scale)}),this.node.on(cc.Node.EventType.TOUCH_END,function(t){null!=e._touchEndCallback&&e._touchEndCallback(e.node,t.getLocation())})},t.prototype.disableTouchEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START),this.node.off(cc.Node.EventType.TOUCH_MOVE),this.node.off(cc.Node.EventType.TOUCH_END)},t.prototype.setBgMaskSpriteFrame=function(e){this.node.getComponent(cc.Mask).spriteFrame=e},t.prototype.setBgSpriteFrame=function(e){this.nodeBg.getComponent(cc.Sprite).spriteFrame=e},t.prototype.setMoveFrom=function(e){this._moveFrom=e},t.prototype.setTouchStartCallback=function(e){this._touchStartCallback=e},t.prototype.setTouchMoveCallback=function(e){this._touchMoveCallback=e},t.prototype.setTouchEndCallback=function(e){this._touchEndCallback=e},t.prototype.reloadBg=function(e,t,n,o,r,c,i){this._nodeFg=e,this._totalCol=o,this._totalRow=r,this._colIndex=c,this._rowIndex=i,this._bgWidth=t,this._bgHeight=n,this._scale=2/o;var a=this._bgWidth/2,s=this._bgHeight/2,l=s>>1,u=-(s>>1)-a*this._colIndex,p=l+s*this._rowIndex;this.nodeBg.x=u,this.nodeBg.y=p,this.nodeBg.scale=1/this._scale},t.prototype.setCurrentRowCol=function(e,t){this._rowCurr=e,this._colCurr=t},t.prototype.isInRightPos=function(){return this._colCurr==this._colIndex&&this._rowCurr==this._rowIndex},t.prototype.getPosString=function(){return"row:"+this._rowIndex+" col:"+this._colIndex+" curr:"+this._rowCurr+","+this._colCurr+" "+this.isInRightPos()},c([s(cc.Node)],t.prototype,"nodeBg",void 0),c([a],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],EventManager:[function(e,t,n){"use strict";cc._RF.push(t,"de2b3THrftOtJW+XpoPeai8","EventManager");var o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var c=arguments[t],i=0,a=c.length;i<a;i++,r++)o[r]=c[i];return o};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.register=function(t,n,o){e.listeners[t]||(e.listeners[t]=[]),e.listeners[t].push(new c(n,o))},e.remove=function(t,n,o){var r=e.listeners[t];if(r){for(var c=r.length,i=0;i<c;i++)if(r[i].compar(o)){r.splice(i,1);break}0==r.length&&delete e.listeners[t]}},e.isRegistered=function(t,n,o){var r=e.listeners[t];if(!r)return!1;for(var c=r.length,i=0;i<c;i++)if(r[i].compar(o))return!0;return!1},e.fire=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var c=e.listeners[t];if(c){for(var i=c.length,a=[],s=0,l=c;s<l.length;s++){var u=l[s];a.push(u)}for(var p=0;p<i;p++)(u=a[p])&&u.notify.apply(u,o([t],n));a=null}},e.listeners={},e}();n.default=r;var c=function(){function e(e,t){this.callback=null,this.context=null,this.callback=e,this.context=t}return e.prototype.notify=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this;(e=r.callback).call.apply(e,o([r.context],t))},e.prototype.compar=function(e){return e==this.context},e}();cc._RF.pop()},{}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"94d9bzcnxVCGIsxDxhqhP2U","GameManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PublicDefine"),r=function(){function e(){this.nLevel=4,this.nTime=10,this.nScoreInit=0,this.nScoreCurr=0,this.nScoreCost=100,this.strBGPath="",this.strPuzzlePath="",this.strAppId="",this.strUid="",this.strReturnUrl="",this.strCheckCode="",this.strTimeStamp="",this.spriteFramePuzzle=null,this.eGameEndType=o.GAME_END_TYPE.GAME_LOSE,this.eSceneType=o.SCENE_TYPE.WELCOME_SCENE}return Object.defineProperty(e,"Instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e.prototype.Init=function(){o.default.Log("[GameManager][Init]")},e}();n.default=r,cc._RF.pop()},{"./PublicDefine":"PublicDefine"}],PublicDefine:[function(e,t,n){"use strict";cc._RF.push(t,"dbe0eaE0DRJg4pp+ZWV9AwQ","PublicDefine"),Object.defineProperty(n,"__esModule",{value:!0}),n.GAME_END_TYPE=n.GAME_STATE=n.SCENE_TYPE=void 0,function(e){e[e.WELCOME_SCENE=0]="WELCOME_SCENE",e[e.GAME_SCENE=1]="GAME_SCENE"}(n.SCENE_TYPE||(n.SCENE_TYPE={})),function(e){e[e.GAME_INIT=0]="GAME_INIT",e[e.GAME_START=1]="GAME_START",e[e.GAME_END=2]="GAME_END"}(n.GAME_STATE||(n.GAME_STATE={})),function(e){e[e.GAME_LOSE=0]="GAME_LOSE",e[e.GAME_WIN=1]="GAME_WIN"}(n.GAME_END_TYPE||(n.GAME_END_TYPE={}));var o=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e.Log=function(e){console.log(e)},e.LoadRemoteImg=function(t,n){cc.loader.load(n,function(n,o){if(n)e.Log("[PublicDefine][LoadRemoteImg]LoadSprite:"+n.message);else{var r=new cc.SpriteFrame(o);t.spriteFrame=r}})},e.LoadSpriteFrame=function(t,n,o,r){var c=t;c.length>0&&(0==c.indexOf("Atlas/")||0==c.indexOf("TiledMap/"))?cc.loader.loadRes(c,cc.SpriteAtlas,function(t,c){if(t)return e.Log("[PublicDefine][LoadSpriteFrame]LoadSpriteAtlas:"+t.message),void o.call(r,null);var i=c.getSpriteFrame(n);o.call(r,i)}):cc.loader.loadRes(c+n,cc.SpriteFrame,function(t,n){if(t)return e.Log("[PublicDefine][LoadSpriteFrame]LoadSprite:"+t.message),void o.call(r,null);o.call(r,n)})},e.LoadAudioClip=function(t,n,o){cc.loader.loadRes(t,cc.AudioClip,function(t,r){if(t)return e.Log("[PublicDefine][LoadAudioClip]LoadAudio:"+t.message),void n.call(o,null);n.call(o,r)})},e.Random=function(e,t,n){return void 0===n&&(n=!1),n?Math.floor(Math.random()*(t-e+1))+e:Math.floor(Math.random()*(t-e))+e},e.PrefixInteger=function(e,t){return(Array(t).join("0")+e).slice(-t)},e.CompareVersion=function(e,t){for(var n=e.split("."),o=t.split("."),r=Math.max(n.length,o.length);n.length<r;)n.push("0");for(;o.length<r;)o.push("0");for(var c=0;c<r;c++){var i=parseInt(n[c]),a=parseInt(o[c]);if(i>a)return 1;if(i<a)return-1}return 0},e.DEBUG=!1,e.REMOTE_URL="",e.REMOTE_CONFIG=!1,e.REMOTE_RESOURCE=!1,e.PHOTOPOSTFIX=".png",e.PLISTPOSTFIX=".plist",e}();n.default=o,cc._RF.pop()},{}]},{},["EventManager","GameManager","PublicDefine","CGame","CInit","CPiece","CPieceMgr"]);