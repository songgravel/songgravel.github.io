window.__require=function e(t,o,n){function i(c,a){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=o[c]={exports:{}};t[c][0].call(p.exports,function(e){return i(t[c][1][e]||e)},p,p.exports,e,t,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({CGame:[function(e,t,o){"use strict";cc._RF.push(t,"9e3470BUCpKiq+0oLRSidXG","CGame");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./CPiece"),a=e("./CPieceMgr"),s=e("../../XZH5Game/GameManager"),l=e("../../XZH5Game/PublicDefine"),p=cc._decorator,u=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefabPiece=null,t.nodeBg=null,t.nodeBgTip=null,t.nodePieceMgr=null,t.nodeFg=null,t.nodeStartCountDown=null,t.groupCountDown=null,t.labelCountDown=null,t.mgrScale=.37,t.sfpPieceMask2=[],t.sfpPieceMask3=[],t.sfpPieceMask4=[],t.sfpPieceBG=null,t._bgWidth=0,t._bgHeight=0,t._pieceCol=2,t._pieceRow=2,t._pieceScale=1,t._piecePos=[],t._pieceNodes=[],t._timeLeft=0,t._gameState=l.GAME_STATE.GAME_INIT,t}return i(t,e),t.prototype.start=function(){null==s.default.Instance.spriteFramePuzzle&&(s.default.Instance.spriteFramePuzzle=this.sfpPieceBG),this._pieceCol=s.default.Instance.nLevel,this._pieceRow=s.default.Instance.nLevel,this._pieceScale=2/s.default.Instance.nLevel,this._bgWidth=this.nodeBg.width,this._bgHeight=this.nodeBg.height,this.nodeBgTip.getComponent(cc.Sprite).spriteFrame=s.default.Instance.spriteFramePuzzle,this.calcPiecePos(),this.reloadAllPiece()},t.prototype.update=function(e){this._gameState==l.GAME_STATE.GAME_START&&(this._timeLeft-=e,this._timeLeft<=0&&(this._timeLeft=0,this.showGameEnd(l.GAME_END_TYPE.GAME_LOSE)),this.labelCountDown.string=Math.ceil(this._timeLeft).toString())},t.prototype.reloadAllPiece=function(){var e=this;this.nodeBg.removeAllChildren(),this.nodePieceMgr.removeAllChildren(),this.nodeFg.removeAllChildren(),this._gameState=l.GAME_STATE.GAME_INIT,this._timeLeft=s.default.Instance.nTime,this.nodePieceMgr.getComponent(a.default).reset(),this.labelCountDown.string=this._timeLeft.toString(),this.groupCountDown.active=!1;var t=this.sfpPieceMask2;3==s.default.Instance.nLevel?t=this.sfpPieceMask3:4==s.default.Instance.nLevel&&(t=this.sfpPieceMask4),this._pieceNodes=[];for(var o=0;o<this._pieceRow;o++)for(var n=0;n<this._pieceCol;n++){var i=cc.instantiate(this.prefabPiece),r=i.getComponent(c.default);r.reloadBg(this.nodeFg,this._bgWidth,this._bgHeight,this._pieceCol,this._pieceRow,n,o),r.setTouchEndCallback(function(t,o){e.onPieceTouchEndCallback(t,o)}),r.setTouchStartCallback(function(t){e.onPieceTouchStartCallback(t)});var p=n+o*this._pieceCol;r.setBgMaskSpriteFrame(t[p]),r.setBgSpriteFrame(s.default.Instance.spriteFramePuzzle),this._pieceNodes.push(i),i.parent=this.nodeBg,i.scale=this._pieceScale,i.x=this._piecePos[o][n].x,i.y=this._piecePos[o][n].y}for(this._pieceNodes.sort(function(){return Math.random()-.5}),o=0;o<this._pieceNodes.length;o++){var u=this._pieceNodes[o].getComponent(c.default);cc.log("Piece"+o+":"+u.getPosString())}this.showGameStart()},t.prototype.onPieceTouchStartCallback=function(e){for(var t=this.nodePieceMgr.getComponent(a.default),o=-1,n=0;n<t.getPieceCount();n++)if(e==t.getPiece(n)){o=n;break}t.removePiece(o),t.moveToLeft(o)},t.prototype.onPieceTouchEndCallback=function(e,t){for(var o=cc.winSize.width,n=0,i=0,r=0;r<this._pieceRow;r++)for(var s=0;s<this._pieceCol;s++)(d=this.nodeBg.convertToWorldSpaceAR(this._piecePos[r][s]).sub(t).mag())<o&&(o=d,n=this._piecePos[r][s].x,i=this._piecePos[r][s].y,e.getComponent(c.default).setCurrentRowCol(r,s));e.parent!=this.nodeBg&&(this.changePieceParent(e,this.nodeBg),e.scale=this._pieceScale);var p=new cc.Vec2;p.y=0;var u=this.nodePieceMgr.getComponent(a.default),f=!1,h=-1;for(r=0;r<=u.getPieceCount();r++){var d;p.x=u.getOffset()/2+r*u.getOffset(),(d=this.nodePieceMgr.convertToWorldSpaceAR(p).sub(t).mag())<o&&(f=!0,o=d,n=p.x,i=p.y,h=r)}f?(this.changePieceParent(e,this.nodePieceMgr),e.scale=this.mgrScale,u.moveToRight(h),u.addPiece(h,e),e.getComponent(c.default).setCurrentRowCol(-1,-1)):e.getComponent(c.default).isInRightPos()&&(cc.log("piece is right"),this.checkAllPieces()&&this.showGameEnd(l.GAME_END_TYPE.GAME_WIN)),cc.tween(e).to(.1,{position:cc.v3(n,i,0)}).start()},t.prototype.changePieceParent=function(e,t){if(e.parent!=t){var o=new cc.Vec2(e.x,e.y),n=e.parent.convertToWorldSpaceAR(o);o=t.convertToNodeSpaceAR(n),e.x=o.x,e.y=o.y,e.parent=t,t==this.nodeBg?e.getComponent(c.default).setMoveFrom(1):t==this.nodePieceMgr&&e.getComponent(c.default).setMoveFrom(0)}},t.prototype.calcPiecePos=function(){var e=this._bgWidth/this._pieceCol,t=this._bgHeight/this._pieceRow,o=t>>1,n=t>>1;this._piecePos=[];for(var i=0;i<this._pieceRow;i++){this._piecePos[i]=[];for(var r=0;r<this._pieceCol;r++){var c=new cc.Vec2;c.x=o+e*r,c.y=-n-t*i,this._piecePos[i].push(c)}}},t.prototype.checkAllPieces=function(){for(var e=0;e<this._pieceNodes.length;e++){var t=this._pieceNodes[e].getComponent(c.default);if(null!=t&&!t.isInRightPos())return!1}return!0},t.prototype.showGameStart=function(){var e=this;cc.log("game start"),this.nodeStartCountDown.getComponent(cc.Animation).play(),cc.tween(this.node).to(3,{}).call(function(){e.onGameStarted()}).start()},t.prototype.onGameStarted=function(){var e=this;cc.log("on game started");for(var t=this.nodePieceMgr.getComponent(a.default),o=0,n=0,i=function(i){var a=r._pieceNodes[i];if(null!=a){var s=a.getComponent(c.default);if(null!=s){t.addPiece(o,a);var l=a.width*r.mgrScale,p=(l>>1)+o*l;o++,n<=0&&(n=l);var u=new cc.Vec2(p,0),f=r.nodePieceMgr.convertToWorldSpaceAR(u);u=r.nodeFg.convertToNodeSpaceAR(f),r.changePieceParent(a,r.nodeFg),cc.tween(a).to(.5,{position:cc.v3(u.x,u.y,0),scale:r.mgrScale}).call(function(){e.changePieceParent(a,e.nodePieceMgr),s.setMoveFrom(0),s.enableTouchEvent()}).start()}}},r=this,s=0;s<this._pieceNodes.length;s++)i(s);t.setOffset(n),this.groupCountDown.active=!0,this._gameState=l.GAME_STATE.GAME_START},t.prototype.showGameEnd=function(e){var t=this;cc.log("game end:"+e),this._gameState=l.GAME_STATE.GAME_END,s.default.Instance.eGameEndType=e;for(var o=0;o<this._pieceNodes.length;o++){var n=this._pieceNodes[o];if(null!=n){var i=n.getComponent(c.default);null!=i&&i.disableTouchEvent()}}cc.tween(this.node).to(3,{}).call(function(){t.onGameEnded()}).start()},t.prototype.onGameEnded=function(){cc.log("on game ended:"+s.default.Instance.eGameEndType),this.reloadAllPiece()},r([f(cc.Prefab)],t.prototype,"prefabPiece",void 0),r([f(cc.Node)],t.prototype,"nodeBg",void 0),r([f(cc.Node)],t.prototype,"nodeBgTip",void 0),r([f(cc.Node)],t.prototype,"nodePieceMgr",void 0),r([f(cc.Node)],t.prototype,"nodeFg",void 0),r([f(cc.Node)],t.prototype,"nodeStartCountDown",void 0),r([f(cc.Node)],t.prototype,"groupCountDown",void 0),r([f(cc.Label)],t.prototype,"labelCountDown",void 0),r([f],t.prototype,"mgrScale",void 0),r([f([cc.SpriteFrame])],t.prototype,"sfpPieceMask2",void 0),r([f([cc.SpriteFrame])],t.prototype,"sfpPieceMask3",void 0),r([f([cc.SpriteFrame])],t.prototype,"sfpPieceMask4",void 0),r([f(cc.SpriteFrame)],t.prototype,"sfpPieceBG",void 0),r([u],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../XZH5Game/GameManager":"GameManager","../../XZH5Game/PublicDefine":"PublicDefine","./CPiece":"CPiece","./CPieceMgr":"CPieceMgr"}],CInit:[function(e,t,o){"use strict";cc._RF.push(t,"cdb99RNRx5EvpUBje4681ow","CInit");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../XZH5Game/GameManager"),a=e("../../XZH5Game/PublicDefine"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeBg=null,t.progressBar=null,t.sfpDefaultPuzzle=null,t._retry=0,t}return i(t,e),t.prototype.start=function(){c.default.Instance.nLevel=2,c.default.Instance.nTime=10,c.default.Instance.nScore=0,c.default.Instance.nCost=50,c.default.Instance.strBGPath="https://songgravel.github.io/test/bg_001.jpg",c.default.Instance.strPuzzlePath="https://songgravel.github.io/test/product_001.png",this.loadRemoteBG(),cc.director.preloadScene("game",function(){cc.log("game scene preloaded")})},t.prototype.loadRemoteBG=function(){cc.log("loadRemoteBG");var e=this;cc.assetManager.loadRemote(c.default.Instance.strBGPath,{onFileProgress:function(t,o){o>0&&(e.progressBar.progress=t/o*.5)}},function(t,o){if(t)return a.default.Log("[CInit][loadRemoteBG]LoadSprite:"+t.message),void e.loadRemotePuzzle();var n=new cc.SpriteFrame(o);e.nodeBg.getComponent(cc.Sprite).spriteFrame=n,e.loadRemotePuzzle()})},t.prototype.loadRemotePuzzle=function(){if(cc.log("loadRemotePuzzle"),this._retry++,this._retry>3)return c.default.Instance.spriteFramePuzzle=this.sfpDefaultPuzzle,cc.log("load default puzzle"),void this.switchScene();var e=this;cc.assetManager.loadRemote(c.default.Instance.strPuzzlePath,{onFileProgress:function(t,o){o>0&&(e.progressBar.progress=.5+t/o*.5)}},function(t,o){if(t)return a.default.Log("[CInit][loadRemotePuzzle]LoadSprite:"+t.message),void e.loadRemotePuzzle();e.progressBar.progress=1;var n=new cc.SpriteFrame(o);c.default.Instance.spriteFramePuzzle=n,e.switchScene()})},t.prototype.switchScene=function(){cc.log("switch scene"),cc.director.loadScene("game")},r([p(cc.Node)],t.prototype,"nodeBg",void 0),r([p(cc.ProgressBar)],t.prototype,"progressBar",void 0),r([p(cc.SpriteFrame)],t.prototype,"sfpDefaultPuzzle",void 0),r([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../XZH5Game/GameManager":"GameManager","../../XZH5Game/PublicDefine":"PublicDefine"}],CPieceMgr:[function(e,t,o){"use strict";cc._RF.push(t,"81576S1vcJEbrz6xI2pyNqY","CPieceMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pieces=[],t._offset=0,t}return i(t,e),t.prototype.start=function(){},t.prototype.reset=function(){this._offset=0,this._pieces=[]},t.prototype.getPieceCount=function(){return this._pieces.length},t.prototype.getPiece=function(e){return e<0||e>=this._pieces.length?null:this._pieces[e]},t.prototype.addPiece=function(e,t){e<0||e>this._pieces.length||null!=t&&this._pieces.splice(e,0,t)},t.prototype.removePiece=function(e){e<0||e>=this._pieces.length||this._pieces.splice(e,1)},t.prototype.moveToLeft=function(e){if(!(e<0||e>=this._pieces.length))for(var t=0;t<this._pieces.length;t++)t>=e&&cc.tween(this._pieces[t]).by(.5,{position:cc.v2(-this._offset,0)}).start()},t.prototype.moveToRight=function(e){if(!(e<0||e>=this._pieces.length))for(var t=0;t<this._pieces.length;t++)t>=e&&cc.tween(this._pieces[t]).by(.1,{position:cc.v2(this._offset,0)}).start()},t.prototype.setOffset=function(e){this._offset=e},t.prototype.getOffset=function(){return this._offset},r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],CPiece:[function(e,t,o){"use strict";cc._RF.push(t,"4f1f5MECm1NQJq2q7dmIPgj","CPiece");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeBg=null,t._nodeFg=null,t._totalCol=0,t._totalRow=0,t._colIndex=0,t._rowIndex=0,t._colCurr=-1,t._rowCurr=-1,t._bgWidth=0,t._bgHeight=0,t._touchEndCallback=null,t._touchMoveCallback=null,t._touchStartCallback=null,t._moveFrom=0,t._scale=1,t}return i(t,e),t.prototype.start=function(){},t.prototype.enableTouchEvent=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){null!=e._touchStartCallback&&0==e._moveFrom&&e._touchStartCallback(e.node)}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.node.parent=e._nodeFg;var o=e._nodeFg.convertToNodeSpaceAR(t.getLocation());e.node.x=o.x,e.node.y=o.y,e.node.scale<e._scale&&(e.node.scale=e._scale)}),this.node.on(cc.Node.EventType.TOUCH_END,function(t){null!=e._touchEndCallback&&e._touchEndCallback(e.node,t.getLocation())})},t.prototype.disableTouchEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START),this.node.off(cc.Node.EventType.TOUCH_MOVE),this.node.off(cc.Node.EventType.TOUCH_END)},t.prototype.setBgMaskSpriteFrame=function(e){this.node.getComponent(cc.Mask).spriteFrame=e},t.prototype.setBgSpriteFrame=function(e){this.nodeBg.getComponent(cc.Sprite).spriteFrame=e},t.prototype.setMoveFrom=function(e){this._moveFrom=e},t.prototype.setTouchStartCallback=function(e){this._touchStartCallback=e},t.prototype.setTouchMoveCallback=function(e){this._touchMoveCallback=e},t.prototype.setTouchEndCallback=function(e){this._touchEndCallback=e},t.prototype.reloadBg=function(e,t,o,n,i,r,c){this._nodeFg=e,this._totalCol=n,this._totalRow=i,this._colIndex=r,this._rowIndex=c,this._bgWidth=t,this._bgHeight=o,this._scale=2/n;var a=this._bgWidth/2,s=this._bgHeight/2,l=s>>1,p=-(s>>1)-a*this._colIndex,u=l+s*this._rowIndex;this.nodeBg.x=p,this.nodeBg.y=u,this.nodeBg.scale=1/this._scale},t.prototype.setCurrentRowCol=function(e,t){this._rowCurr=e,this._colCurr=t},t.prototype.isInRightPos=function(){return this._colCurr==this._colIndex&&this._rowCurr==this._rowIndex},t.prototype.getPosString=function(){return"row:"+this._rowIndex+" col:"+this._colIndex+" curr:"+this._rowCurr+","+this._colCurr+" "+this.isInRightPos()},r([s(cc.Node)],t.prototype,"nodeBg",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],EventManager:[function(e,t,o){"use strict";cc._RF.push(t,"de2b3THrftOtJW+XpoPeai8","EventManager");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],c=0,a=r.length;c<a;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return e.register=function(t,o,n){e.listeners[t]||(e.listeners[t]=[]),e.listeners[t].push(new r(o,n))},e.remove=function(t,o,n){var i=e.listeners[t];if(i){for(var r=i.length,c=0;c<r;c++)if(i[c].compar(n)){i.splice(c,1);break}0==i.length&&delete e.listeners[t]}},e.isRegistered=function(t,o,n){var i=e.listeners[t];if(!i)return!1;for(var r=i.length,c=0;c<r;c++)if(i[c].compar(n))return!0;return!1},e.fire=function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var r=e.listeners[t];if(r){for(var c=r.length,a=[],s=0,l=r;s<l.length;s++){var p=l[s];a.push(p)}for(var u=0;u<c;u++)(p=a[u])&&p.notify.apply(p,n([t],o));a=null}},e.listeners={},e}();o.default=i;var r=function(){function e(e,t){this.callback=null,this.context=null,this.callback=e,this.context=t}return e.prototype.notify=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var i=this;(e=i.callback).call.apply(e,n([i.context],t))},e.prototype.compar=function(e){return e==this.context},e}();cc._RF.pop()},{}],GameManager:[function(e,t,o){"use strict";cc._RF.push(t,"94d9bzcnxVCGIsxDxhqhP2U","GameManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PublicDefine"),i=function(){function e(){this.nLevel=2,this.nTime=10,this.nScore=0,this.nCost=50,this.strBGPath="",this.strPuzzlePath="",this.spriteFramePuzzle=null,this.eGameEndType=n.GAME_END_TYPE.GAME_LOSE,this.eSceneType=n.SCENE_TYPE.WELCOME_SCENE}return Object.defineProperty(e,"Instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e.prototype.Init=function(){n.default.Log("[GameManager][Init]")},e}();o.default=i,cc._RF.pop()},{"./PublicDefine":"PublicDefine"}],PublicDefine:[function(e,t,o){"use strict";cc._RF.push(t,"dbe0eaE0DRJg4pp+ZWV9AwQ","PublicDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.GAME_END_TYPE=o.GAME_STATE=o.SCENE_TYPE=void 0,function(e){e[e.WELCOME_SCENE=0]="WELCOME_SCENE",e[e.GAME_SCENE=1]="GAME_SCENE"}(o.SCENE_TYPE||(o.SCENE_TYPE={})),function(e){e[e.GAME_INIT=0]="GAME_INIT",e[e.GAME_START=1]="GAME_START",e[e.GAME_END=2]="GAME_END"}(o.GAME_STATE||(o.GAME_STATE={})),function(e){e[e.GAME_LOSE=0]="GAME_LOSE",e[e.GAME_WIN=1]="GAME_WIN"}(o.GAME_END_TYPE||(o.GAME_END_TYPE={}));var n=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e.Log=function(e){console.log(e)},e.LoadRemoteImg=function(t,o){cc.loader.load(o,function(o,n){if(o)e.Log("[PublicDefine][LoadRemoteImg]LoadSprite:"+o.message);else{var i=new cc.SpriteFrame(n);t.spriteFrame=i}})},e.LoadSpriteFrame=function(t,o,n,i){var r=t;r.length>0&&(0==r.indexOf("Atlas/")||0==r.indexOf("TiledMap/"))?cc.loader.loadRes(r,cc.SpriteAtlas,function(t,r){if(t)return e.Log("[PublicDefine][LoadSpriteFrame]LoadSpriteAtlas:"+t.message),void n.call(i,null);var c=r.getSpriteFrame(o);n.call(i,c)}):cc.loader.loadRes(r+o,cc.SpriteFrame,function(t,o){if(t)return e.Log("[PublicDefine][LoadSpriteFrame]LoadSprite:"+t.message),void n.call(i,null);n.call(i,o)})},e.LoadAudioClip=function(t,o,n){cc.loader.loadRes(t,cc.AudioClip,function(t,i){if(t)return e.Log("[PublicDefine][LoadAudioClip]LoadAudio:"+t.message),void o.call(n,null);o.call(n,i)})},e.Random=function(e,t,o){return void 0===o&&(o=!1),o?Math.floor(Math.random()*(t-e+1))+e:Math.floor(Math.random()*(t-e))+e},e.PrefixInteger=function(e,t){return(Array(t).join("0")+e).slice(-t)},e.CompareVersion=function(e,t){for(var o=e.split("."),n=t.split("."),i=Math.max(o.length,n.length);o.length<i;)o.push("0");for(;n.length<i;)n.push("0");for(var r=0;r<i;r++){var c=parseInt(o[r]),a=parseInt(n[r]);if(c>a)return 1;if(c<a)return-1}return 0},e.DEBUG=!1,e.REMOTE_URL="",e.REMOTE_CONFIG=!1,e.REMOTE_RESOURCE=!1,e.PHOTOPOSTFIX=".png",e.PLISTPOSTFIX=".plist",e}();o.default=n,cc._RF.pop()},{}]},{},["EventManager","GameManager","PublicDefine","CGame","CInit","CPiece","CPieceMgr"]);